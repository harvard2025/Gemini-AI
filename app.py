from flask import Flask, render_template, request
import requests
from google import genai
import markdown
app = Flask(__name__)


# ๐ง ุฏุงูุฉ ุฅุฑุณุงู ุงูุจุฑููุจุช ููููุฏูู
def ask_model(prompt):
    # >>>>>>>>>>>>>>>>>>>> ููุง ู ูุดุชุบู APIูุงูุต ุจุณ ุชุญุท ุงู 
    # >>>>>>>>>>>> Gemini AI studio/Get your API key --> 
    a = "Put you API key Here"
    client = genai.Client(api_key=a)
    response = client.models.generate_content(
        model="gemini-2.5-flash",
        contents=prompt
    )
    return markdown.markdown(response.text)
    

# ๐ ุชุฌููุฒ ุงูุจุฑููุจุช ุงูุฐูู ูุชุญููู ุงููุต
def build_prompt(user_text):
    return f"""
        ูู ุจุชุญููู ุงููุต ุงูุชุงูู ุงูุฐู ูููุซู ุฌุฒุกูุง ูู ุดุฑูุท ุงูุงุณุชุฎุฏุงู ุฃู ุณูุงุณุฉ ุงูุฎุตูุตูุฉ. ูู ุจุงูุขุชู ุจุฏูุฉ:

        1. ุงุณุชุฎุฑุฌ ุฃู ุจููุฏ ุชูุชูู ุฎุตูุตูุฉ ุงููุณุชุฎุฏู ุฃู ุชููุญ ุงูุดุฑูุฉ ุตูุงุญูุงุช ูุจุงูุบ ูููุงุ ูุซู:
        - ุฌูุน ุจูุงูุงุช ุงููุณุชุฎุฏู ุฃู ุจูุนูุง ูุทุฑู ุซุงูุซ.
        - ุชุชุจุน ูููุน ุงููุณุชุฎุฏู ุฃู ุณูููู ุฏูู ููุงููุฉ ูุงุถุญุฉ.
        - ุญุฑูุงู ุงููุณุชุฎุฏู ูู ุงูุญู ูู ุญุฐู ุจูุงูุงุชู.
        - ููุญ ุงูุดุฑูุฉ ุงูุญู ูู ุชุนุฏูู ุงูุดุฑูุท ุฏูู ุฅุดุนุงุฑ.

        2. ุตููู ูู ุจูุฏ ูุดุจูู ุญุณุจ ูุณุชูู ุงูุฎุทูุฑุฉ: (ููุฎูุถุ ูุชูุณุทุ ุนุงูู ุงูุฎุทูุฑุฉ).

        3. ุชุฑุฌู ูู ุจูุฏ ูุงูููู ุฃู ุบุงูุถ ุฅูู ูุบุฉ ุนุฑุจูุฉ ุจุณูุทุฉ ููุงุถุญุฉ ูููููุง ุฃู ูุณุชุฎุฏู.

        4. ุฅุฐุง ูู ูุญุชูู ุงููุต ุนูู ุฃู ูุดุงููุ ููู ุฐูู ุจูุถูุญุ ูุงุฐูุฑ ุงูุฃุณุจุงุจ.

        5. ุฅุฐุง ูุงู ุงููุต ุบูุฑ ูุงูู ููุญููุ ูุงุดุฑุญ ููุงุฐุงุ ูุงุทูุจ ูู ุงููุณุชุฎุฏู ุชุฒููุฏู ุจุฌุฒุก ุฃุทูู ุฃู ุฃูุซุฑ ุชุญุฏูุฏูุง.

        ุงููุต:
        \"\"\"
        {user_text}
        \"\"\"
    """ 


# ๐ Route ุฑุฆูุณูุฉ ูููููุน
@app.route("/", methods=["GET", "POST"])
def index():
    reply = None
    if request.method == "POST":
        user_input = request.form.get("text")
        prompt = build_prompt(user_input)
        reply = ask_model(prompt)
    return render_template("layout.html", nigga=reply)

# ๐ ุชุดุบูู ุงูุณูุฑูุฑ
if __name__ == "__main__":
    app.run()